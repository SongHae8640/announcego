# 화면 설계서

## 1. 공통 화면

### 1.1 로그인 화면
- **경로**: `/login`

#### 레이아웃
```
┌─────────────────────────────────────┐
│         알리다고 로고/제목           │
│                                     │
│  ┌───────────────────────────┐     │
│  │  아이디 입력              │     │
│  └───────────────────────────┘     │
│  ┌───────────────────────────┐     │
│  │  비밀번호 입력            │     │
│  └───────────────────────────┘     │
│                                     │
│      [로그인 버튼]                  │
└─────────────────────────────────────┘
```

#### 데이터 처리
- 로그인 API 호출
  - 요청: 로그인ID, 비밀번호
  - 응답: 인증토큰, 사용자타입(admin/agency), 최초로그인여부

#### 화면 전환
- 관리자 계정: 관리자 대시보드로 이동
- 광고업체 계정 (최초 로그인): 비밀번호 변경 화면으로 이동
- 광고업체 계정 (기존 사용자): 광고업체 대시보드로 이동

---

## 2. 관리자 화면

### 2.1 대시보드
- **경로**: `/admin/dashboard`

#### 레이아웃
```
┌─────────────────────────────────────────────────────────────┐
│  [상단 네비게이션 - 대시보드/병원관리/광고업체/데이터/계약/문의]  │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐          │
│  │전체병원 │ │광고업체 │ │만료임박 │ │미답변   │          │
│  │  120    │ │  120    │ │   5     │ │문의 3   │          │
│  └─────────┘ └─────────┘ └─────────┘ └─────────┘          │
│                                                             │
│  [최근 입력된 광고 데이터]                                   │
│  ┌───────────────────────────────────────────────┐        │
│  │ 병원명 | 업체명 | 키워드 | 순위 | 날짜        │        │
│  │ A병원  | X업체  | 강남한의원 | 3 | 2025-11-17 │        │
│  │ ...                                           │        │
│  └───────────────────────────────────────────────┘        │
│                                                             │
│  [계약 만료 임박 광고업체 (D-7 이내)]                        │
│  ┌───────────────────────────────────────────────┐        │
│  │ 업체명 | 담당병원 | 만료일 | D-day             │        │
│  │ Y업체  | B병원    | 2025-11-24 | D-7          │        │
│  └───────────────────────────────────────────────┘        │
└─────────────────────────────────────────────────────────────┘
```

#### 데이터 처리
- 대시보드 정보 조회 API 호출
  - 요청: 없음
  - 응답:
    - 요약정보(전체병원수, 광고업체수, 만료임박수, 미답변문의수)
    - 최근광고데이터[병원명, 업체명, 키워드, 순위, 날짜]
    - 만료임박업체[업체명, 담당병원, 만료일, D-day]

#### 화면 전환
- 각 영역 클릭 시 해당 상세 페이지로 이동

---

### 2.2 병원 목록 관리
- **경로**: `/admin/hospitals`

#### 레이아웃
```
┌─────────────────────────────────────────────────────────────┐
│  [상단 네비게이션]                                            │
├─────────────────────────────────────────────────────────────┤
│  병원 관리                                                   │
│                                                             │
│  [검색창: 병원명 검색]              [+ 병원 등록]           │
│                                                             │
│  ┌───────────────────────────────────────────────────┐     │
│  │ 병원명 | 연락처 | 주소 | 담당업체수 | 등록일 | 액션 │     │
│  ├───────────────────────────────────────────────────┤     │
│  │ A병원  | 02-1234 | 서울... | 3개 | 2025-01 | [수정][삭제] │
│  │ B병원  | 02-5678 | 서울... | 2개 | 2025-02 | [수정][삭제] │
│  │ ...                                               │     │
│  └───────────────────────────────────────────────────┘     │
│                                                             │
│  [페이징: 1 2 3 4 5 ... 10]                                │
└─────────────────────────────────────────────────────────────┘
```

#### 데이터 처리
- 병원 목록 조회 API 호출
  - 요청: 페이지번호, 페이지크기, 검색어(병원명)
  - 응답: 병원목록[병원명, 연락처, 주소, 담당업체수, 등록일], 전체건수, 전체페이지수
- 병원 삭제 API 호출
  - 요청: 병원ID
  - 응답: 없음

#### 화면 전환
- 병원 등록 버튼 → 병원 등록 페이지
- 수정 버튼 → 병원 수정 페이지

#### 특이사항
- 삭제 불가 시 안내 메시지 표시 (담당 광고업체 존재)

---

### 2.3 병원 등록/수정
- **경로**: `/admin/hospitals/new`, `/admin/hospitals/:id/edit`

#### 레이아웃
```
┌─────────────────────────────────────────────────────────────┐
│  [상단 네비게이션]                                            │
├─────────────────────────────────────────────────────────────┤
│  병원 등록 / 수정                                            │
│                                                             │
│  병원명 *                                                   │
│  ┌─────────────────────────────────────────────┐          │
│  │                                             │          │
│  └─────────────────────────────────────────────┘          │
│                                                             │
│  연락처 *                                                   │
│  ┌─────────────────────────────────────────────┐          │
│  │                                             │          │
│  └─────────────────────────────────────────────┘          │
│                                                             │
│  주소 *                                                     │
│  ┌─────────────────────────────────────────────┐          │
│  │                                             │          │
│  └─────────────────────────────────────────────┘          │
│                                                             │
│         [취소]  [저장]                                       │
└─────────────────────────────────────────────────────────────┘
```

#### 데이터 처리
- 병원 정보 등록 API 호출 (경로가 `/new`인 경우)
  - 요청: 병원명, 연락처, 주소
  - 응답: 없음
- 병원 정보 수정 API 호출 (경로가 `/:id/edit`인 경우)
  - 요청: 병원ID, 병원명, 연락처, 주소
  - 응답: 없음

#### 화면 전환
- 저장 성공 시 → 병원 목록 페이지
- 취소 버튼 → 이전 페이지

---

### 2.4 광고업체 목록 관리
- **경로**: `/admin/agencies`

#### 레이아웃
```
┌─────────────────────────────────────────────────────────────┐
│  [상단 네비게이션]                                            │
├─────────────────────────────────────────────────────────────┤
│  광고업체 관리                                               │
│                                                             │
│  [검색창: 업체명 검색]  [필터: 계약상태]  [+ 광고업체 등록]  │
│                                                             │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ 업체명 | 담당병원 | 연락처 | 이메일 | 계약상태 | 만료일 | 액션 │
│  ├───────────────────────────────────────────────────────┤ │
│  │ X업체 | A병원 | 010-1234 | x@... | 결제완료 | 2025-12-31 | [수정][삭제] │
│  │ Y업체 | B병원 | 010-5678 | y@... | 미결제   | 2025-11-30 | [수정][삭제] │
│  │ ...                                                   │ │
│  └───────────────────────────────────────────────────────┘ │
│                                                             │
│  [페이징: 1 2 3 4 5 ... 10]                                │
└─────────────────────────────────────────────────────────────┘
```

#### 데이터 처리
- 광고업체 목록 조회 API 호출
  - 요청: 페이지번호, 페이지크기, 검색어(업체명), 계약상태필터
  - 응답: 광고업체목록[업체명, 담당병원, 연락처, 이메일, 계약상태, 만료일], 전체건수, 전체페이지수
- 광고업체 삭제 API 호출
  - 요청: 광고업체ID
  - 응답: 없음

#### 화면 전환
- 광고업체 등록 버튼 → 광고업체 등록 페이지
- 수정 버튼 → 광고업체 수정 페이지

---

### 2.5 광고업체 등록/수정
- **경로**: `/admin/agencies/new`, `/admin/agencies/:id/edit`

#### 레이아웃
```
┌─────────────────────────────────────────────────────────────┐
│  [상단 네비게이션]                                            │
├─────────────────────────────────────────────────────────────┤
│  광고업체 등록 / 수정                                         │
│                                                             │
│  업체명 *                                                   │
│  ┌─────────────────────────────────────────────┐          │
│  │                                             │          │
│  └─────────────────────────────────────────────┘          │
│                                                             │
│  로그인 ID * (등록 시에만)                                   │
│  ┌─────────────────────────────────────────────┐          │
│  │                                             │          │
│  └─────────────────────────────────────────────┘          │
│                                                             │
│  초기 비밀번호 * (등록 시에만)                               │
│  ┌─────────────────────────────────────────────┐          │
│  │                                             │ [자동생성] │
│  └─────────────────────────────────────────────┘          │
│                                                             │
│  담당 병원 *                                                │
│  ┌─────────────────────────────────────────────┐          │
│  │ [병원 선택 드롭다운]                        │          │
│  └─────────────────────────────────────────────┘          │
│                                                             │
│  연락처 *                                                   │
│  ┌─────────────────────────────────────────────┐          │
│  │                                             │          │
│  └─────────────────────────────────────────────┘          │
│                                                             │
│  이메일 *                                                   │
│  ┌─────────────────────────────────────────────┐          │
│  │                                             │          │
│  └─────────────────────────────────────────────┘          │
│                                                             │
│         [취소]  [저장]                                       │
└─────────────────────────────────────────────────────────────┘
```

#### 데이터 처리
- 로그인 ID 중복 검증 API 호출 (등록 시)
  - 요청: 로그인ID
  - 응답: 중복여부
- 초기 비밀번호 자동 생성 API 호출 (등록 시)
  - 요청: 없음
  - 응답: 초기비밀번호
- 담당 병원 목록 조회 API 호출
  - 요청: 없음
  - 응답: 병원목록[병원ID, 병원명]
- 광고업체 정보 등록 API 호출 (경로가 `/new`인 경우)
  - 요청: 업체명, 로그인ID, 초기비밀번호, 담당병원ID, 연락처, 이메일
  - 응답: 없음
- 광고업체 정보 수정 API 호출 (경로가 `/:id/edit`인 경우)
  - 요청: 광고업체ID, 업체명, 담당병원ID, 연락처, 이메일
  - 응답: 없음

#### 화면 전환
- 저장 성공 시 → 광고업체 목록 페이지
- 취소 버튼 → 이전 페이지

---

### 2.6 전체 광고 데이터 조회
- **경로**: `/admin/ad-data`

#### 레이아웃
```
┌─────────────────────────────────────────────────────────────┐
│  [상단 네비게이션]                                            │
├─────────────────────────────────────────────────────────────┤
│  전체 광고 데이터                                            │
│                                                             │
│  [필터]                                                     │
│  병원: [전체▼]  광고업체: [전체▼]  기간: [2025-11-01 ~ 11-17] │
│  [검색]                                                     │
│                                                             │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ 날짜 | 병원명 | 업체명 | 키워드 | 순위 | 플랫폼 | 등록일시 │ │
│  ├───────────────────────────────────────────────────────┤ │
│  │ 11-17 | A병원 | X업체 | 강남한의원 | 3 | 네이버 | 11-17 10:30 │
│  │ 11-17 | B병원 | Y업체 | 서울한의원 | 5 | 구글 | 11-17 11:00 │
│  │ ...                                                   │ │
│  └───────────────────────────────────────────────────────┘ │
│                                                             │
│  [페이징: 1 2 3 4 5 ... 30]                                │
└─────────────────────────────────────────────────────────────┘
```

#### 데이터 처리
- 전체 광고 데이터 조회 API 호출
  - 요청: 페이지번호, 페이지크기, 병원필터, 광고업체필터, 시작일, 종료일, 정렬기준
  - 응답: 광고데이터목록[날짜, 병원명, 업체명, 키워드, 순위, 플랫폼, 등록일시], 전체건수, 전체페이지수

---

### 2.7 계약 체결 관리
- **경로**: `/admin/contracts`

#### 레이아웃
```
┌─────────────────────────────────────────────────────────────┐
│  [상단 네비게이션]                                            │
├─────────────────────────────────────────────────────────────┤
│  계약 체결 관리                                              │
│                                                             │
│  [필터: 전체/미결제/결제완료]  [검색창: 업체명 검색]         │
│                                                             │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ 업체명 | 은행명 | 계좌번호 | 입금주 | 결제금액 | 결제일 | 만료일 | D-day | 상태 │
│  ├───────────────────────────────────────────────────────┤ │
│  │ X업체 | 국민 | 123-456 | 홍길동 | 1,000,000 | 11-01 | 12-31 | D-44 | [결제완료] │
│  │ Y업체 | 신한 | 789-012 | 김철수 | 1,200,000 | 11-01 | 11-24 | D-7  | [미결제] │
│  │ ...                                                   │ │
│  └───────────────────────────────────────────────────────┘ │
│                                                             │
│  [페이징: 1 2 3 4 5 ... 10]                                │
└─────────────────────────────────────────────────────────────┘
```

#### 데이터 처리
- 계약 목록 조회 API 호출
  - 요청: 페이지번호, 페이지크기, 계약상태필터, 검색어(업체명)
  - 응답: 계약목록[업체명, 담당병원, 은행명, 계좌번호, 입금주, 결제금액, 결제일, 만료일, 상태], 전체건수, 전체페이지수
- 계약 상태 변경 API 호출
  - 요청: 계약ID
  - 응답: 없음

#### 특이사항
- 상태 변경: 테이블의 상태 셀 클릭 → 미결제 ↔ 결제완료 토글 → 확인 모달

---

### 2.8 1:1 문의 관리
- **경로**: `/admin/inquiries`

#### 레이아웃
```
┌─────────────────────────────────────────────────────────────┐
│  [상단 네비게이션]                                            │
├─────────────────────────────────────────────────────────────┤
│  1:1 문의 관리                                               │
│                                                             │
│  [필터: 전체/미답변/답변완료]                                │
│                                                             │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ 업체명 | 제목 | 문의일 | 답변상태                       │ │
│  ├───────────────────────────────────────────────────────┤ │
│  │ X업체 | 데이터 입력 오류 문의 | 2025-11-15 | 미답변    │ │
│  │ Y업체 | 계약 연장 문의 | 2025-11-14 | 답변완료          │ │
│  │ ...                                                   │ │
│  └───────────────────────────────────────────────────────┘ │
│                                                             │
│  [페이징: 1 2 3 4 5]                                        │
└─────────────────────────────────────────────────────────────┘
```

#### 데이터 처리
- 문의 목록 조회 API 호출
  - 요청: 페이지번호, 페이지크기, 답변상태필터
  - 응답: 문의목록[업체명, 제목, 문의일, 답변상태], 전체건수, 전체페이지수

#### 화면 전환
- 문의 row 클릭 → 문의 상세 모달

---

### 2.9 문의 상세/답변 작성 (모달)
- **경로**: `/admin/inquiries/:id` (모달)

#### 레이아웃
```
┌─────────────────────────────────────────────────────────────┐
│  문의 상세                                          [X 닫기] │
├─────────────────────────────────────────────────────────────┤
│  업체명: X업체                                              │
│  문의일: 2025-11-15 14:30                                   │
│                                                             │
│  제목: 데이터 입력 오류 문의                                 │
│  ───────────────────────────────────────────────────────   │
│  내용:                                                      │
│  ┌─────────────────────────────────────────────┐          │
│  │ 광고 데이터를 입력하려고 하는데                │          │
│  │ 오류가 발생합니다. 확인 부탁드립니다.          │          │
│  └─────────────────────────────────────────────┘          │
│                                                             │
│  답변:                                                      │
│  ┌─────────────────────────────────────────────┐          │
│  │ (답변 입력 영역)                              │          │
│  │                                             │          │
│  │                                             │          │
│  └─────────────────────────────────────────────┘          │
│                                                             │
│                 [취소]  [답변 등록]                          │
└─────────────────────────────────────────────────────────────┘
```

#### 데이터 처리
- 문의 상세 조회 API 호출
  - 요청: 문의ID
  - 응답: 업체명, 문의일, 제목, 내용, 답변내용, 답변일
- 답변 등록 API 호출
  - 요청: 문의ID, 답변내용
  - 응답: 없음

#### 화면 전환
- 답변 등록 완료 → 모달 닫기
- 취소 버튼 → 모달 닫기

#### 특이사항
- 답변 등록 시 상태 자동 변경 (미답변 → 답변완료)

---

## 3. 광고업체 화면

### 3.1 비밀번호 변경 화면 (최초 로그인 강제)
- **경로**: `/agency/change-password`

#### 레이아웃
```
┌─────────────────────────────────────────────────────────────┐
│  비밀번호 변경 (필수)                                         │
├─────────────────────────────────────────────────────────────┤
│  보안을 위해 비밀번호를 변경해주세요.                          │
│                                                             │
│  새 비밀번호 *                                               │
│  ┌─────────────────────────────────────────────┐          │
│  │                                             │          │
│  └─────────────────────────────────────────────┘          │
│  (8자 이상, 영문/숫자/특수문자 포함)                          │
│                                                             │
│  새 비밀번호 확인 *                                          │
│  ┌─────────────────────────────────────────────┐          │
│  │                                             │          │
│  └─────────────────────────────────────────────┘          │
│                                                             │
│              [변경하기]                                      │
└─────────────────────────────────────────────────────────────┘
```

#### 데이터 처리
- 비밀번호 변경 API 호출
  - 요청: 새비밀번호, 새비밀번호확인
  - 응답: 없음

#### 화면 전환
- 변경 완료 후 → 광고업체 대시보드

#### 특이사항
- 이 화면 완료 전까지 다른 페이지 접근 차단

---

### 3.2 대시보드
- **경로**: `/agency/dashboard`

#### 레이아웃
```
┌─────────────────────────────────────────────────────────────┐
│  [상단 네비게이션 - 대시보드/광고데이터/계약정보/문의]         │
├─────────────────────────────────────────────────────────────┤
│  [담당 병원 정보]                                            │
│  담당 병원: A병원                                            │
│  연락처: 02-1234-5678                                       │
│                                                             │
│  ┌─────────────────────────────────────────────┐          │
│  │  계약 만료일 D-day                           │          │
│  │  ┌──────────────────────────────────┐      │          │
│  │  │  D-44  (2025-12-31 만료)          │      │          │
│  │  │  [정상]                           │      │          │
│  │  └──────────────────────────────────┘      │          │
│  │  * D-7: 주황색, D-3: 빨간색 강조            │          │
│  └─────────────────────────────────────────────┘          │
│                                                             │
│  [빠른 메뉴]                                                 │
│  ┌──────────┐  ┌──────────┐                              │
│  │ 광고데이터 │  │ 계약정보  │                              │
│  │   입력    │  │   수정   │                              │
│  └──────────┘  └──────────┘                              │
│                                                             │
│  [최근 입력한 광고 데이터 (최근 5건)]                         │
│  ┌───────────────────────────────────────────────┐        │
│  │ 날짜 | 키워드 | 순위 | 플랫폼                 │        │
│  │ 11-17 | 강남한의원 | 3 | 네이버               │        │
│  │ ...                                           │        │
│  └───────────────────────────────────────────────┘        │
│  [전체 보기 →]                                              │
└─────────────────────────────────────────────────────────────┘
```

#### 데이터 처리
- 대시보드 정보 조회 API 호출
  - 요청: 없음
  - 응답:
    - 담당병원정보(병원명, 연락처, 주소)
    - 계약정보(만료일, D-day, 결제상태)
    - 최근광고데이터[키워드, 순위, 날짜, 플랫폼]

#### 화면 전환
- 광고데이터 입력 버튼 → 데이터 입력 페이지
- 계약정보 수정 버튼 → 계약 정보 페이지

---

### 3.3 광고 데이터 입력
- **경로**: `/agency/ad-data/new`

#### 레이아웃
```
┌─────────────────────────────────────────────────────────────┐
│  [상단 네비게이션]                                            │
├─────────────────────────────────────────────────────────────┤
│  광고 데이터 입력                                            │
│                                                             │
│  담당 병원                                                  │
│  ┌─────────────────────────────────────────────┐          │
│  │ A병원 (자동 선택됨)                          │          │
│  └─────────────────────────────────────────────┘          │
│                                                             │
│  키워드 *                                                   │
│  ┌─────────────────────────────────────────────┐          │
│  │ 예: 강남 한의원                              │          │
│  └─────────────────────────────────────────────┘          │
│                                                             │
│  순위 *                                                     │
│  ┌─────────────────────────────────────────────┐          │
│  │ 예: 3                                       │          │
│  └─────────────────────────────────────────────┘          │
│                                                             │
│  플랫폼 *                                                   │
│  ┌─────────────────────────────────────────────┐          │
│  │ [네이버 ▼]                                  │          │
│  └─────────────────────────────────────────────┘          │
│                                                             │
│  날짜 *                                                     │
│  ┌─────────────────────────────────────────────┐          │
│  │ [2025-11-17] (날짜 선택기)                  │          │
│  └─────────────────────────────────────────────┘          │
│                                                             │
│         [취소]  [저장]                                       │
└─────────────────────────────────────────────────────────────┘
```

#### 데이터 처리
- 담당 병원 정보 조회 API 호출
  - 요청: 없음
  - 응답: 병원ID, 병원명
- 광고 데이터 등록 API 호출
  - 요청: 병원ID, 키워드, 순위, 날짜, 플랫폼
  - 응답: 없음

#### 화면 전환
- 저장 성공 시 → 데이터 목록 페이지
- 취소 버튼 → 이전 페이지

---

### 3.4 광고 데이터 조회
- **경로**: `/agency/ad-data`

#### 레이아웃
```
┌─────────────────────────────────────────────────────────────┐
│  [상단 네비게이션]                                            │
├─────────────────────────────────────────────────────────────┤
│  광고 데이터 관리                                            │
│                                                             │
│  [필터]                                                     │
│  기간: [2025-11-01 ~ 11-17]  플랫폼: [전체▼]               │
│  [검색] [+ 데이터 입력]                                      │
│                                                             │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ 날짜 | 키워드 | 순위 | 플랫폼 | 등록일시 | 액션         │ │
│  ├───────────────────────────────────────────────────────┤ │
│  │ 11-17 | 강남한의원 | 3 | 네이버 | 11-17 10:30 | [수정][삭제] │
│  │ 11-16 | 서울한의원 | 5 | 구글   | 11-16 15:20 | [수정][삭제] │
│  │ ...                                                   │ │
│  └───────────────────────────────────────────────────────┘ │
│                                                             │
│  [페이징: 1 2 3 4 5]                                        │
└─────────────────────────────────────────────────────────────┘
```

#### 데이터 처리
- 광고 데이터 목록 조회 API 호출
  - 요청: 페이지번호, 페이지크기, 시작일, 종료일, 플랫폼필터
  - 응답: 광고데이터목록[날짜, 키워드, 순위, 플랫폼, 등록일시], 전체건수, 전체페이지수
- 광고 데이터 수정 API 호출
  - 요청: 광고데이터ID, 키워드, 순위, 날짜, 플랫폼
  - 응답: 없음
- 광고 데이터 삭제 API 호출
  - 요청: 광고데이터ID
  - 응답: 없음

#### 화면 전환
- 데이터 입력 버튼 → 데이터 입력 페이지
- 수정 버튼 → 데이터 수정 페이지

#### 특이사항
- 삭제 시 확인 모달 표시

---

### 3.5 계약 체결 정보 관리
- **경로**: `/agency/contracts`

#### 레이아웃
```
┌─────────────────────────────────────────────────────────────┐
│  [상단 네비게이션]                                            │
├─────────────────────────────────────────────────────────────┤
│  계약 정보 관리                                              │
│                                                             │
│  [현재 계약 정보]                                            │
│  계약 상태: 결제완료 (관리자 확인 완료)                       │
│  만료일: 2025-12-31 (D-44)                                  │
│                                                             │
│  은행명 *                                                   │
│  ┌─────────────────────────────────────────────┐          │
│  │ 국민은행                                     │          │
│  └─────────────────────────────────────────────┘          │
│                                                             │
│  계좌번호 *                                                 │
│  ┌─────────────────────────────────────────────┐          │
│  │ 123456-78-901234                            │          │
│  └─────────────────────────────────────────────┘          │
│                                                             │
│  입금주 *                                                   │
│  ┌─────────────────────────────────────────────┐          │
│  │ 홍길동                                       │          │
│  └─────────────────────────────────────────────┘          │
│                                                             │
│  결제금액 *                                                 │
│  ┌─────────────────────────────────────────────┐          │
│  │ 1,000,000                                   │          │
│  └─────────────────────────────────────────────┘          │
│                                                             │
│  결제일 *                                                   │
│  ┌─────────────────────────────────────────────┐          │
│  │ [2025-11-01] (날짜 선택기)                  │          │
│  └─────────────────────────────────────────────┘          │
│                                                             │
│  계약만료일 *                                               │
│  ┌─────────────────────────────────────────────┐          │
│  │ [2025-12-31] (날짜 선택기)                  │          │
│  └─────────────────────────────────────────────┘          │
│                                                             │
│  ※ 계약 상태는 관리자가 입금 확인 후 변경합니다.              │
│                                                             │
│         [취소]  [저장]                                       │
└─────────────────────────────────────────────────────────────┘
```

#### 데이터 처리
- 계약 정보 조회 API 호출
  - 요청: 없음
  - 응답: 은행명, 계좌번호, 입금주, 결제금액, 결제일, 계약만료일, 계약상태
- 계약 정보 등록 API 호출 (최초 입력 시)
  - 요청: 은행명, 계좌번호, 입금주, 결제금액, 결제일, 계약만료일
  - 응답: 없음
- 계약 정보 수정 API 호출 (기존 계약 정보 존재 시)
  - 요청: 계약ID, 은행명, 계좌번호, 입금주, 결제금액, 결제일, 계약만료일
  - 응답: 없음

#### 화면 전환
- 취소 버튼 → 이전 페이지

#### 특이사항
- 계약 상태(미결제/결제완료)는 관리자만 변경 가능 (읽기 전용)
- 저장 시 상태 자동 "미결제" 설정

---

### 3.6 1:1 문의 목록
- **경로**: `/agency/inquiries`

#### 레이아웃
```
┌─────────────────────────────────────────────────────────────┐
│  [상단 네비게이션]                                            │
├─────────────────────────────────────────────────────────────┤
│  1:1 문의 내역                                               │
│                                                             │
│  [+ 문의 작성]                                               │
│                                                             │
│  ┌───────────────────────────────────────────────────────┐ │
│  │ 제목 | 문의일 | 답변상태 | 액션                         │ │
│  ├───────────────────────────────────────────────────────┤ │
│  │ 데이터 입력 오류 문의 | 2025-11-15 | 답변완료 | [상세보기] │
│  │ 계약 연장 문의 | 2025-11-14 | 미답변 | [상세보기]     │ │
│  │ ...                                                   │ │
│  └───────────────────────────────────────────────────────┘ │
│                                                             │
│  [페이징: 1 2 3]                                            │
└─────────────────────────────────────────────────────────────┘
```

#### 데이터 처리
- 문의 목록 조회 API 호출
  - 요청: 페이지번호, 페이지크기
  - 응답: 문의목록[제목, 문의일, 답변상태], 전체건수, 전체페이지수

#### 화면 전환
- 문의 작성 버튼 → 문의 작성 페이지
- 상세보기 버튼 → 문의 상세 모달

---

### 3.7 1:1 문의 작성
- **경로**: `/agency/inquiries/new`

#### 레이아웃
```
┌─────────────────────────────────────────────────────────────┐
│  [상단 네비게이션]                                            │
├─────────────────────────────────────────────────────────────┤
│  1:1 문의 작성                                               │
│                                                             │
│  제목 *                                                     │
│  ┌─────────────────────────────────────────────┐          │
│  │                                             │          │
│  └─────────────────────────────────────────────┘          │
│                                                             │
│  내용 *                                                     │
│  ┌─────────────────────────────────────────────┐          │
│  │                                             │          │
│  │                                             │          │
│  │                                             │          │
│  │                                             │          │
│  └─────────────────────────────────────────────┘          │
│                                                             │
│         [취소]  [등록]                                       │
└─────────────────────────────────────────────────────────────┘
```

#### 데이터 처리
- 문의 등록 API 호출
  - 요청: 제목, 내용
  - 응답: 없음

#### 화면 전환
- 등록 완료 시 → 문의 목록 페이지
- 취소 버튼 → 이전 페이지

---

### 3.8 1:1 문의 상세 (모달)
- **경로**: `/agency/inquiries/:id` (모달)

#### 레이아웃
```
┌─────────────────────────────────────────────────────────────┐
│  문의 상세                                          [X 닫기] │
├─────────────────────────────────────────────────────────────┤
│  제목: 데이터 입력 오류 문의                                 │
│  문의일: 2025-11-15 14:30                                   │
│  답변상태: 답변완료                                          │
│  ───────────────────────────────────────────────────────   │
│                                                             │
│  [문의 내용]                                                 │
│  ┌─────────────────────────────────────────────┐          │
│  │ 광고 데이터를 입력하려고 하는데                │          │
│  │ 오류가 발생합니다. 확인 부탁드립니다.          │          │
│  └─────────────────────────────────────────────┘          │
│                                                             │
│  [관리자 답변]                                               │
│  답변일: 2025-11-16 10:00                                   │
│  ┌─────────────────────────────────────────────┐          │
│  │ 확인한 결과 시스템 오류가 맞습니다.            │          │
│  │ 수정 완료했으니 다시 시도해주세요.             │          │
│  └─────────────────────────────────────────────┘          │
│                                                             │
│                      [확인]                                  │
└─────────────────────────────────────────────────────────────┘
```

#### 데이터 처리
- 문의 상세 조회 API 호출
  - 요청: 문의ID
  - 응답: 제목, 문의일, 답변상태, 내용, 답변내용, 답변일

#### 화면 전환
- 확인 버튼 → 모달 닫기

---

## 4. 병원 화면

### 4.1 광고 현황 조회 (링크 접속 + 인증)
- **경로**: `/hospital/:id/ad-status`
- **접근 방식**: 병원별 고유 링크로 접속

#### 레이아웃 (인증 전)
```
┌─────────────────────────────────────┐
│         알리다고 로고/제목           │
│                                     │
│  설명한의원 구미 광고 현황 조회      │
│                                     │
│  전화번호 인증                       │
│  ┌───────────────────────────┐     │
│  │ 전화번호 뒷자리 4자리 입력  │     │
│  └───────────────────────────┘     │
│                                     │
│      [인증하기]                      │
└─────────────────────────────────────┘
```

#### 레이아웃 (인증 후)
```
┌─────────────────────────────────────────────────┐
│  [알리다고 컨설팅 로고]           2025-11-03     │
│                                      [로그아웃]  │
├─────────────────────────────────────────────────┤
│              설명한의원 구미                     │
│              네이버광고                          │
├─────────────────────────────────────────────────┤
│                                                 │
│  ┌──────────────────────────────────────┐     │
│  │ [네이버광고]                          │     │
│  ├──────────────────────────────────────┤     │
│  │ 노들한의원                            │     │
│  │ 김재식              ₩100,000          │     │
│  │ 노들한의원          클리어스크린      │     │
│  │ 김재식              ₩90,000           │     │
│  │ 플레버스크린        파랑버스크린      │     │
│  │ 김재식              탑0               │     │
│  │ 상담전화            010-123-1234      │     │
│  └──────────────────────────────────────┘     │
│                                                 │
│  ┌──────────────────────────────────────┐     │
│  │ [과위컨젠츠]                          │     │
│  ├──────────────────────────────────────┤     │
│  │ 업체명              다영커뮤니케이션  │     │
│  │                     그룹노출수        │     │
│  │ 작성일자                              │     │
│  └──────────────────────────────────────┘     │
│                                                 │
│  ┌──────────────────────────────────────┐     │
│  │ [블로그 상위노출]                     │     │
│  ├──────────────────────────────────────┤     │
│  │ 업체명              다영커뮤니케이션  │     │
│  │ 키워드              구미현석병        │     │
│  │ 보상순위            6위 / 8위         │     │
│  │ 작성일자            ₩385,000          │     │
│  │                                       │     │
│  │ *블로그 단독발굴 불고                 │     │
│  └──────────────────────────────────────┘     │
│                                                 │
│  ┌──────────────────────────────────────┐     │
│  │ [카페 상위노출]                       │     │
│  ├──────────────────────────────────────┤     │
│  │ 업체명              영진시스          │     │
│  │ 키워드              구미 노들 한의원  │     │
│  │ 보상순위            2위               │     │
│  │ 작성일자            ₩550,000          │     │
│  │                                       │     │
│  │ *블로그 단독발굴 불고                 │     │
│  └──────────────────────────────────────┘     │
│                                                 │
│  ┌──────────────────────────────────────┐     │
│  │ [블로그 배포]                         │     │
│  ├──────────────────────────────────────┤     │
│  │ 업체명              다지다인          │     │
│  │ 작성건수            15건              │     │
│  │ 작성일자            ₩855,000          │     │
│  │                                       │     │
│  │ *블로그 단독발굴 불고                 │     │
│  └──────────────────────────────────────┘     │
│                                                 │
│  ┌──────────────────────────────────────┐     │
│  │ [심의 유효기간]                       │     │
│  ├──────────────────────────────────────┤     │
│  │ 여드름과 상담 후 광고 송관 보통       │     │
│  │ 보조액 1년                            │     │
│  │ 승인기간                              │     │
│  │ 심의사유            플레버스크린      │     │
│  │ 승인기간                              │     │
│  │ 심의사유            파랑버스 기존 소재│     │
│  │ 승인기간                              │     │
│  │ 심의사유            파랑버스 배달 소재│     │
│  │ 승인기간                              │     │
│  └──────────────────────────────────────┘     │
│                                                 │
└─────────────────────────────────────────────────┘
```

#### 데이터 처리
- 병원 인증 API 호출
  - 요청: 병원ID, 전화번호뒷자리
  - 응답: 인증토큰, 병원명
- 광고 현황 조회 API 호출
  - 요청: 병원ID, 조회일자
  - 응답: 광고현황목록[카테고리, 업체명, 항목명, 항목값]

#### 특이사항
- 조회 전용 화면 (입력/수정 불가)
- 병원별 고유 링크로 접속
- 인증 실패 시 에러 메시지 표시

#### 추가 요건 정의 필요사항
> ⚠️ **중요**: 현재 화면 예시와 광고업체/관리자 입력 항목 간의 명확한 매핑이 필요합니다.
>
> **정의가 필요한 사항:**
> 1. 각 광고 카테고리별 입력 항목 정의
     >    - **네이버광고**: 어떤 항목들을 입력받을지 (담당자, 금액, 연락처 등)
     >    - **과위컨젠츠**: 그룹노출수 데이터 입력 방식
>    - **블로그/카페 상위노출**: 키워드, 순위 입력 방식 및 보상순위 계산 로직
>    - **블로그 배포**: 작성건수 집계 방식
>    - **심의 유효기간**: 심의 관련 데이터 입력 방식 및 승인기간 관리
>
> 2. 광고업체별 입력 권한 및 범위
     >    - 각 업체가 담당하는 광고 카테고리
     >    - 업체별로 입력 가능한 데이터 항목
>    - 한 병원에 여러 업체가 서로 다른 카테고리 담당 시 처리 방식
>
> 3. 데이터 표시 형식 및 계산 로직
     >    - 금액 표시 방식 및 계산 근거
     >    - 순위 변동 추적 방식 (6위/8위 형태의 의미)
>    - 작성일자/등록일시 관리 방식
>    - 비고 메시지 관리 방식
>
> 4. 필터링 및 조회 옵션
     >    - 날짜별 조회 방식 (현재는 날짜 하나만 표시)
     >    - 과거 데이터 조회 필요 여부
>    - 광고 카테고리별 필터링 필요 여부
>
> 추가 논의를 통해 위 사항들을 명확히 정의한 후
> 광고업체 데이터 입력 화면 설계에 반영이 필요합니다.

---

## 5. 화면 목록

### 5.1 공통

| 화면명 | 경로 | 설명 |
|--------|------|------|
| [로그인 화면](#11-로그인-화면) | `/login` | 관리자/광고업체 계정 인증 |

### 5.2 관리자

| 화면명 | 경로 | 설명 |
|--------|------|------|
| [대시보드](#21-대시보드) | `/admin/dashboard` | 전체 요약 정보 및 현황 확인 |
| [병원 목록 관리](#22-병원-목록-관리) | `/admin/hospitals` | 병원 목록 조회, 검색, 삭제 |
| [병원 등록/수정](#23-병원-등록수정) | `/admin/hospitals/new`, `/:id/edit` | 병원 정보 등록 및 수정 |
| [광고업체 목록 관리](#24-광고업체-목록-관리) | `/admin/agencies` | 광고업체 목록 조회, 필터, 삭제 |
| [광고업체 등록/수정](#25-광고업체-등록수정) | `/admin/agencies/new`, `/:id/edit` | 광고업체 계정 생성 및 수정 |
| [광고 데이터 조회](#26-광고-데이터-조회) | `/admin/ad-data` | 전체 광고 데이터 조회, 필터, 정렬 |
| [계약 관리](#27-계약-관리) | `/admin/contracts` | 계약 목록 조회 및 상태 변경 |
| [1:1 문의 관리](#28-11-문의-관리) | `/admin/inquiries` | 문의 목록 조회 및 답변 작성 |

### 5.3 광고업체

| 화면명 | 경로 | 설명 |
|--------|------|------|
| [비밀번호 변경 화면](#31-비밀번호-변경-화면) | `/agency/change-password` | 최초 로그인 시 비밀번호 변경 |
| [대시보드](#32-대시보드) | `/agency/dashboard` | 담당 병원 정보 및 계약 현황 확인 |
| [광고 데이터 입력](#33-광고-데이터-입력) | `/agency/ad-data/new` | 담당 병원 광고 데이터 등록 |
| [광고 데이터 조회](#34-광고-데이터-조회) | `/agency/ad-data` | 입력한 광고 데이터 조회, 수정, 삭제 |
| [계약 정보 관리](#35-계약-정보-관리) | `/agency/contract` | 계약 정보 등록 및 수정 |
| [1:1 문의](#36-11-문의) | `/agency/inquiries` | 문의 목록 조회 및 등록 |
| [문의 상세보기 (모달)](#37-문의-상세보기-모달) | - | 문의 상세 내용 및 답변 확인 |

### 5.4 병원

| 화면명 | 경로 | 설명 |
|--------|------|------|
| [광고 현황 조회](#41-광고-현황-조회-링크-접속--인증) | `/hospital/:id/ad-status` | 전화번호 인증 후 광고 현황 조회 |

---

## 6. API 목록

### 6.1 공통 API

| API 명 | 설명 | 메서드 | 경로 | 사용 화면 |
|--------|------|--------|------|----------|
| 로그인 | 계정 인증 및 사용자 타입 판별 | POST | /api/auth/login | [로그인 화면](#11-로그인-화면) |

### 6.2 관리자 API

| API 명 | 설명 | 메서드 | 경로 | 사용 화면 |
|--------|------|--------|------|----------|
| 대시보드 정보 조회 | 전체 요약 정보 및 최근 데이터 조회 | GET | /api/admin/dashboard | [대시보드](#21-대시보드) |
| 병원 목록 조회 | 병원 목록 조회 (페이징, 검색) | GET | /api/admin/hospitals | [병원 목록 관리](#22-병원-목록-관리) |
| 병원 정보 등록 | 새 병원 정보 등록 | POST | /api/admin/hospitals | [병원 등록/수정](#23-병원-등록수정) |
| 병원 정보 수정 | 기존 병원 정보 수정 | PUT | /api/admin/hospitals/:id | [병원 등록/수정](#23-병원-등록수정) |
| 병원 삭제 | 병원 정보 삭제 | DELETE | /api/admin/hospitals/:id | [병원 목록 관리](#22-병원-목록-관리) |
| 광고업체 목록 조회 | 광고업체 목록 조회 (페이징, 필터, 검색) | GET | /api/admin/agencies | [광고업체 목록 관리](#24-광고업체-목록-관리) |
| 담당 병원 목록 조회 | 드롭다운용 병원 목록 조회 | GET | /api/admin/hospitals/list | [광고업체 등록/수정](#25-광고업체-등록수정) |
| 로그인 ID 중복 검증 | 광고업체 로그인 ID 중복 확인 | GET | /api/admin/agencies/check-id | [광고업체 등록/수정](#25-광고업체-등록수정) |
| 초기 비밀번호 생성 | 랜덤 초기 비밀번호 생성 | GET | /api/admin/agencies/generate-password | [광고업체 등록/수정](#25-광고업체-등록수정) |
| 광고업체 정보 등록 | 새 광고업체 정보 등록 | POST | /api/admin/agencies | [광고업체 등록/수정](#25-광고업체-등록수정) |
| 광고업체 정보 수정 | 기존 광고업체 정보 수정 | PUT | /api/admin/agencies/:id | [광고업체 등록/수정](#25-광고업체-등록수정) |
| 광고업체 삭제 | 광고업체 정보 삭제 | DELETE | /api/admin/agencies/:id | [광고업체 목록 관리](#24-광고업체-목록-관리) |
| 전체 광고 데이터 조회 | 전체 광고 데이터 목록 조회 (페이징, 필터, 검색, 정렬) | GET | /api/admin/ad-data | [광고 데이터 조회](#26-광고-데이터-조회) |
| 계약 목록 조회 | 전체 계약 정보 목록 조회 (페이징, 필터, 검색) | GET | /api/admin/contracts | [계약 관리](#27-계약-관리) |
| 계약 상태 변경 | 계약 상태 토글 (미결제 ↔ 결제완료) | PATCH | /api/admin/contracts/:id/status | [계약 관리](#27-계약-관리) |
| 문의 목록 조회 | 전체 문의 목록 조회 (페이징, 필터) | GET | /api/admin/inquiries | [1:1 문의 관리](#28-11-문의-관리) |
| 문의 상세 조회 | 문의 상세 정보 조회 | GET | /api/admin/inquiries/:id | [1:1 문의 관리](#28-11-문의-관리) |
| 답변 등록 | 문의에 대한 답변 등록 | POST | /api/admin/inquiries/:id/answer | [1:1 문의 관리](#28-11-문의-관리) |

### 6.3 광고업체 API

| API 명 | 설명 | 메서드 | 경로 | 사용 화면 |
|--------|------|--------|------|----------|
| 비밀번호 변경 | 최초 로그인 시 비밀번호 변경 | PUT | /api/agency/password | [비밀번호 변경 화면](#31-비밀번호-변경-화면) |
| 대시보드 정보 조회 | 담당 병원 정보, 계약 정보, 최근 데이터 조회 | GET | /api/agency/dashboard | [대시보드](#32-대시보드) |
| 담당 병원 정보 조회 | 담당 병원 기본 정보 조회 | GET | /api/agency/hospital | [대시보드](#32-대시보드) |
| 광고 데이터 등록 | 새 광고 데이터 등록 | POST | /api/agency/ad-data | [광고 데이터 입력](#33-광고-데이터-입력) |
| 광고 데이터 목록 조회 | 자사 광고 데이터 목록 조회 (페이징, 필터, 검색) | GET | /api/agency/ad-data | [광고 데이터 조회](#34-광고-데이터-조회) |
| 광고 데이터 수정 | 기존 광고 데이터 수정 | PUT | /api/agency/ad-data/:id | [광고 데이터 조회](#34-광고-데이터-조회) |
| 광고 데이터 삭제 | 광고 데이터 삭제 | DELETE | /api/agency/ad-data/:id | [광고 데이터 조회](#34-광고-데이터-조회) |
| 계약 정보 조회 | 현재 계약 정보 조회 | GET | /api/agency/contract | [계약 정보 관리](#35-계약-정보-관리) |
| 계약 정보 등록 | 새 계약 정보 등록 | POST | /api/agency/contract | [계약 정보 관리](#35-계약-정보-관리) |
| 계약 정보 수정 | 기존 계약 정보 수정 | PUT | /api/agency/contract/:id | [계약 정보 관리](#35-계약-정보-관리) |
| 문의 목록 조회 | 본인 작성 문의 목록 조회 (페이징) | GET | /api/agency/inquiries | [1:1 문의](#36-11-문의) |
| 문의 등록 | 새 문의 등록 | POST | /api/agency/inquiries | [1:1 문의](#36-11-문의) |
| 문의 상세 조회 | 문의 상세 정보 조회 | GET | /api/agency/inquiries/:id | [문의 상세보기](#37-문의-상세보기-모달) |

### 6.4 병원 API

| API 명 | 설명 | 메서드 | 경로 | 사용 화면 |
|--------|------|--------|------|----------|
| 병원 인증 | 전화번호 뒷자리로 병원 인증 | POST | /api/hospital/:id/verify | [광고 현황 조회](#41-광고-현황-조회-링크-접속--인증) |
| 광고 현황 조회 | 날짜별 광고 현황 조회 | GET | /api/hospital/:id/ad-status | [광고 현황 조회](#41-광고-현황-조회-링크-접속--인증) |